import{_ as e}from"./BreadCrumbs.abf67da9.js";import{_ as t,c as s,u as a,d as r,e as l}from"./index.6ae74e63.js";import{o as i,d as o,e as d,t as c,r as u,u as n,a as _,c as p,j as v,k as g,s as m,f as h,F as b,h as w,g as f,v as y,i as k,l as C,p as q}from"./vendor.c79a5476.js";const D={props:{review:Object}},x={class:"review-card"},L={class:"review-card__info"},U={class:"author__img review-card__item"},R=["src"],A={class:"author label review-card__item"},P={class:"author review-card__item"},T={class:"review-card__main"};D.render=function(e,t,s,a,r,l){return i(),o("div",x,[d("div",L,[d("span",U,[d("img",{src:s.review.author.img,alt:"user image"},null,8,R)]),d("span",A,c(s.review.author.username),1),d("span",P,c(s.review.created_at),1)]),d("div",T,c(s.review.text),1)])};const G={components:{BreadCrumbs:e,StarRating:t,Headline:s,ReviewCard:D},setup(){const e=u(1),t=n(),s=_(),i=u({reviews:[],questions:[]}),o=u({review:"",question:""}),d=u({}),c=p((()=>t.state.auth.user)),v=async e=>{await l.get("store/product/"+s.params.url+"/"+e+"/").then((({data:t})=>{t&&(t.forEach((t=>{t.author.id!==c.value.id||(d.value[e]=!0)})),i.value[e]=t)})).catch((e=>(console.error(e),{})))};v("reviews"),v("questions");const g=p((()=>t.state.estore.currentProduct));document.title=g.value.name;const m=p((()=>t.getters["estore/getCurrentCategory"])),{addToWishlist:h,removeFromWishlist:b}=a(g.value.id),w={blocktop:{title:"Related products",btn:{title:"Check them",route:{name:"relatedProducts"}}},products:p((()=>t.state.estore.relatedProducts)).value.slice(0,4)},{addToCart:f}=r(g.value,e);return{stock:e,product:g,category:m,headline:w,addToCart:f,tabActive:(e,t)=>{const s=document.getElementsByClassName("tabs__item");for(let r=0;r<s.length;r++)s[r].classList.remove("tabs__item_a");e.target.classList.add("tabs__item_a");const a=document.getElementsByClassName("tabs__target");for(let r=0;r<a.length;r++)a[r].classList.remove("tabs__target_a");document.getElementById(t).classList.add("tabs__target_a")},leaveUserData:e=>{if(""===o.value[e]){const s="review"===e?"review":"asking questions about";t.commit("addMessage",{message:"Please leave something for "+s+" this product!",bgColor:"red",textColor:"#fff"})}else if(null===p((()=>t.state.auth.token)).value){const s="review"===e?"reviwing":"asking questions about";t.commit("addMessage",{message:"Please login for "+s+" products",bgColor:"red",textColor:"#fff"})}else l.post("store/"+e+"/create/",{user:c.value.id,product:g.value.id,text:o.value[e]}).then((()=>{const s="review"===e?"Your review was successfully created!":"You successfully asked a question!";t.commit("addMessage",{message:s,bgColor:"#6a983c",textColor:"#fff"}),v(e+"s")})).catch((e=>{t.commit("addMessage",{message:e,bgColor:"red",textColor:"#fff"})}))},isUserReviewed:d,userGetData:i,userLeaveData:o,addToWishlist:h,removeFromWishlist:b,user:c}}},S={class:"product-detail"},W={class:"product-detail__column"},F={key:0,class:"tag"},I={key:1,class:"product-detail__tag tag"},M=[d("span",null,"Free shipping",-1)],j={class:"product-detail__column"},B={class:"product-detail__main"},E={class:"product-detail__info product-detail__rating"},H={class:"title product-detail__title"},V={class:"label help-text"},Y={class:"product-detail__info product-detail__desc"},N={class:"product-detail__info product-detail__tables"},K={class:"product-detail__table"},O=d("th",null,"SKU:",-1),Q=d("th",null,"Category",-1),z=d("th",null,"Delivery",-1),J=d("th",null,"Stock",-1),X={class:"green"},Z={class:"product-detail__table"},$=d("tr",null,[d("th",null,"Freshness:"),d("td",null,"76645")],-1),ee=d("th",null,"Category",-1),te=d("th",null,"Delivery",-1),se=d("th",null,"Stock",-1),ae={class:"green"},re={class:"product-detail__info product-detail__selling"},le={class:"price product-detail__price"},ie={class:"price__now green product-detail__price_n"},oe={class:"price__old"},de={class:"product-detail__btns"},ce={class:"product-detail__btn product-detail__stock"},ue={class:"product-detail__count"},ne={class:"product-detail__input"},_e=d("select",{name:"type"},[d("option",{value:"Pcs"},"Pcs")],-1),pe={class:"product-detail__add"},ve=[d("span",null,[d("img",{src:"/freshnese-vue/assets/add.1d3fdc29.svg"})],-1),k(" Add to cart ")],ge={class:"product-detail__info product-detail__wishlist wishlist"},me=[d("span",{class:"wishlist__heart"},null,-1),k(" Add to wishlist ")],he=[d("span",{class:"wishlist__heart wishlist__heart_f"},null,-1),k(" Remove from wishlist ")],be=d("button",{class:"wishlist__btn"},[d("span",null,[d("img",{src:"/freshnese-vue/assets/compare.ac50d702.svg",alt:""})]),k(" Compare ")],-1),we={class:"product-detail__description"},fe={class:"product-detail__tabs tabs"},ye=k(" Reviews "),ke={class:"category-title__count tag"},Ce=k(" Questions "),qe={class:"category-title__count tag"},De={class:"product-detail__content"},xe=["innerHTML"],Le={class:"product-detail__block tabs__target",id:"reviews"},Ue={key:0,class:"help-text",style:{"margin-bottom":"10px"}},Re={key:1,class:"product-detail__user"},Ae={class:"review-btn"},Pe={class:"product-detail__block tabs__target",id:"questions"},Te={key:0,class:"help-text",style:{"margin-bottom":"10px"}},Ge={key:1,class:"product-detail__user"},Se={class:"review-btn"};G.render=function(e,t,s,a,r,l){const u=v("bread-crumbs"),n=v("router-link"),_=v("star-rating"),p=v("review-card"),D=v("headline");return i(),o(b,null,[g(u),d("section",S,[d("div",W,[d("div",{class:"product-detail__img",style:m("background-image: linear-gradient(rgba(0, 0, 0,0.3), rgba(0, 0, 0, 0.7)), url("+a.product.img+")")},[a.product.is_sale?(i(),o("span",F,[d("span",null,c((100-100*a.product.price/a.product.old_price).toPrecision(3))+"%",1)])):h("",!0),0==a.product.shipping?(i(),o("span",I,M)):h("",!0),(i(!0),o(b,null,w(a.product.tags,(e=>(i(),o("span",{class:"product-detail__tag tag",key:e.id},[g(n,{to:{name:"tag",params:{category_url:e.url}}},{default:C((()=>[k(c(e.name),1)])),_:2},1032,["to"])])))),128))],4)]),d("div",j,[d("div",B,[d("div",E,[d("h2",H,c(a.product.name),1),g(_,{star:0!=parseInt(a.product.rating_user)?parseInt(a.product.rating_user):null==a.product.rating_avg?0:parseInt(a.product.rating_avg),productId:a.product.id},null,8,["star","productId"]),d("div",V,c(0!=a.product.rating_user?"You already rated this product":a.product.rating_count+" users rated this product"),1)]),d("div",Y,[d("p",null,c(a.product.desc),1)]),d("div",N,[d("div",K,[d("table",null,[d("tr",null,[O,d("td",null,c(a.product.sku),1)]),d("tr",null,[Q,d("td",null,c(a.category({name:"category",url:a.product.category_url}).name),1)]),d("tr",null,[z,d("td",null,c(a.product.delivery_from),1)]),d("tr",null,[J,d("td",X,c(a.product.stock),1)])])]),d("div",Z,[d("table",null,[$,d("tr",null,[ee,d("td",null,c(a.category({name:"category",url:a.product.category_url}).name),1)]),d("tr",null,[te,d("td",null,c(a.product.delivery_from),1)]),d("tr",null,[se,d("td",ae,c(a.product.brand),1)])])])]),d("div",re,[d("div",le,[d("span",ie,c(a.product.price)+" USD",1),d("span",oe,c(a.product.is_sale?a.product.old_price:""),1)]),d("div",de,[d("div",ce,[d("div",ue,[d("div",ne,[f(d("input",{name:"stock",type:"number",step:"1",min:"1",pattern:"\\d+","onUpdate:modelValue":t[0]||(t[0]=e=>a.stock=e)},null,512),[[y,a.stock,void 0,{number:!0}]])]),_e])]),d("div",pe,[d("button",{class:"green-btn",onClick:t[1]||(t[1]=e=>a.addToCart())},ve)])])]),d("div",ge,[a.user.wishlist.filter((e=>e.id===a.product.id)).length?(i(),o("button",{key:1,class:"wishlist__btn",onClick:t[3]||(t[3]=e=>a.removeFromWishlist())},he)):(i(),o("button",{key:0,class:"wishlist__btn",onClick:t[2]||(t[2]=e=>a.addToWishlist())},me)),be])]),d("div",we,[d("div",fe,[d("div",{class:"tabs__item tabs__item_a",onClick:t[4]||(t[4]=e=>a.tabActive(e,"description"))}," Description "),d("div",{class:"tabs__item",onClick:t[5]||(t[5]=e=>a.tabActive(e,"reviews"))},[ye,d("span",ke,c(a.userGetData.reviews.length),1)]),d("div",{class:"tabs__item",onClick:t[6]||(t[6]=e=>a.tabActive(e,"questions"))},[Ce,d("span",qe,c(a.userGetData.questions.length),1)])]),d("div",De,[d("div",{class:"product-detail__block tabs__target tabs__target_a",id:"description",innerHTML:a.product.description},null,8,xe),d("div",Le,[(i(!0),o(b,null,w(a.userGetData.reviews,(e=>(i(),q(p,{key:e.id,review:e},null,8,["review"])))),128)),0===a.userGetData.reviews.length?(i(),o("div",Ue," Sorry, but no one leave review for this product yet! ")):h("",!0),a.isUserReviewed.reviews?h("",!0):(i(),o("div",Re,[f(d("textarea",{name:"review",id:"review",cols:"30",rows:"5",autocomplete:"off",style:{width:"100%","margin-top":"20px"},class:"billing-input","onUpdate:modelValue":t[7]||(t[7]=e=>a.userLeaveData.review=e),placeholder:"Write your review to this product"},null,512),[[y,a.userLeaveData.review]]),d("div",Ae,[d("button",{class:"green-btn",onClick:t[8]||(t[8]=e=>a.leaveUserData("review"))}," Leave Review ")])]))]),d("div",Pe,[(i(!0),o(b,null,w(a.userGetData.questions,(e=>(i(),q(p,{key:e.id,review:e},null,8,["review"])))),128)),0===a.userGetData.questions.length?(i(),o("div",Te," Sorry, but no one asked a question about this product yet! ")):h("",!0),a.isUserReviewed.questions?h("",!0):(i(),o("div",Ge,[f(d("textarea",{name:"question",id:"question",cols:"30",rows:"5",autocomplete:"off",style:{width:"100%","margin-top":"20px"},class:"billing-input","onUpdate:modelValue":t[9]||(t[9]=e=>a.userLeaveData.question=e),placeholder:"Ask your question about this product"},null,512),[[y,a.userLeaveData.question]]),d("div",Se,[d("button",{class:"green-btn",onClick:t[10]||(t[10]=e=>a.leaveUserData("question"))}," Ask a question ")])]))])])])])]),g(D,{headline:a.headline},null,8,["headline"])],64)};export{G as default};
